<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />
    <link rel="stylesheet" href="./css/global.css" />
    <link rel="stylesheet" href="./css/profile.css" />
    <link rel="stylesheet" href="./css/zhay-go-home-page.css">
    <link rel="stylesheet" href="./css/profilepic.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Sans Tai Le:wght@400&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kaushan Script:wght@400&display=swap" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Sans New Tai Lue:wght@500&display=swap" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="./css/dropdown.css">
</head>
<body>
    <style>
        
    
.custom-swal-container {
            font-family: 'Arial', sans-serif;
        }

        .custom-swal-title {
            color: #000000;
            font-size: 24px;
            font-weight: bold;
        }

        .custom-swal-content {
            color: #000000;
            font-size: 18px;
        }
        div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm{
          background-color: #DB6103;
        }
        .custom-swal-confirm-button {
            background-color: #DB6103;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 10px 24px;
            cursor: pointer;
            font-size: 16px;
        }

        .custom-swal-confirm-button:hover {
            background-color: #07414f;
        }
        .home2{
            text-decoration: none;
        }
        
    </style>
    <div class="profile">
        <section class="frame-parent">
            <header class="frame-header">
                <div class="instance-frame">
                    <div class="frame-parent29">
                        <img class="instance-child6" alt="" src="./images/group-136.svg" />
                        <div class="search1">Search</div>
                    </div>
                </div>
                <div class="rectangle-parent6">
                    <div class="frame-child13"></div>
                    <img class="new-logo-12" loading="lazy" alt="" src="./images/new-logo-2@2x.png" />
                    <img class="frame-child14" loading="lazy" alt="" src="./images/group-134.svg" id="group" />
                </div>
                <nav class="frame-nav">
                    <nav class="home-group">
                        <h3 class="home2" id="homeText1">Home</h3>
                        <h3 class="menu3" id="menuText1">Menu</h3>
                        <div class="about-us-container">
                            <h3 class="about-us2" id="aboutUsText">About us</h3>
                        </div>
                        <h3 class="feedback2" id="feedbackText"></h3>
                    </nav>
                </nav>
                <img class="frame-child15" loading="lazy" id="profile-image" alt="" src="./images/images.png" />
                <div id="dropdown-menu" class="dropdown-menu">
                    <a href="/profile">Profile</a>
                    <a href="/payment">Payment History</a>
                    <a href="/logout" id="logout">Logout</a>
                </div>
            </header>
            <div class="frame-div">
                <div class="new-logo-1-parent">
                    <div class="new-logo-1"></div>
                    <div class="image-1"></div>
                    <div class="frame-parent1">
                        <div class="frame-wrapper1">
                            <div class="frame-parent2">
                                <div class="account-setting-wrapper">
                                    <b class="account-setting">Account Setting</b>
                                </div>
                                <div class="line-div"></div>
                            </div>
                        </div>
                        <form id="profile-form" enctype="multipart/form-data">
                            <div class="frame-wrapper2">
                                <div class="your-profile-picture-parent">
                                    <div class="your-profile-picture">Your Profile Picture</div>
                                    <div class="rectangle-group">
                                        <div class="rectangle-div" id="profile-picture-preview" style="background-image: url('./images/default-profile.png'); background-size: cover;"></div>
                                        <input type="file" id="profile-picture" name="profileImage" accept="image/*" style="display:none;">
                                        <div class="gallery-add-wrapper" id="upload-photo-button">
                                            <img class="gallery-add-icon" loading="lazy" alt="" src="./images/galleryadd.svg" />
                                        </div>
                                        <div class="upload-your-photo">Upload your photo</div>
                                    </div>
                                </div>
                            </div>
                            <img class="line-icon" loading="lazy" alt="" src="" />
                            <div class="input-fileds-wrapper">
                                <div class="input-fileds">
                                    <div class="group-div">
                                        <div class="full-name-wrapper">
                                            <div class="full-name">User Name</div>
                                        </div>
                                        <div class="please-enter-the" id="name-instruction">Please enter your name</div>
                                        <input class="instance-item" type="text" name="name" id="name" />
                                    </div>
                                    <div class="frame-parent3">
                                        <div class="full-name-container">
                                            <div class="full-name1">Contact Number</div>
                                        </div>
                                        <div class="please-enter-the1" id="contactNumber-instruction">Please enter your Contact Number</div>
                                        <input class="instance-inner" type="text" name="contactNumber" id="contactNumber" />
                                    </div>
                                    <div class="frame-parent4">
                                        <div class="full-name-frame">
                                            <div class="full-name2">Email Address</div>
                                        </div>
                                        <div class="please-enter-the2" id="email-instruction">Please enter your Email Address</div>
                                        <input class="rectangle-input" type="email" name="email" id="email" />
                                    </div>
                                </div>
                            </div>
                            <div class="frame-wrapper3">
                                <div class="button-parent">
                                    <button type="submit" class="button" id="button">
                                        <div class="button-child"></div>
                                        <b class="update-profile">Update Profile</b>
                                    </button>
                                    <div class="rectangle-container">
                                        <div class="frame-child1"></div>
                                        <b class="reset" id="reset-button">Reset</b>
                                    </div>
                                </div>
                            </div>
                        </form>
                      
                    </div>
                </div>
            </div>
        </section>
        <footer class="footer1">
            <div class="footer-item" data-scroll-to="rectangle"></div>
            <div class="frame-parent37">
                <div class="opening-hours-group">
                    <div class="opening-hours1">Opening Hours</div>
                    <div class="monday-thursday-container1">
                        <p class="monday-thursday1">Monday - Thursday</p>
                        <p class="am-4001">9:00 Am - 4:00 Pm</p>
                    </div>
                </div>
                <div class="friday-sunday-container1">
                    <p class="friday-sunday1">Friday - Sunday</p>
                    <p class="am-5001">11:00 Am - 5:00 Pm</p>
                </div>
            </div>
            <div class="frame-parent38">
                <div class="frame-parent39">
                    <div class="frame-wrapper28">
                        <div class="frame-parent40">
                            <div class="menu-contact-wrapper">
                                <div class="menu-contact">
                                    <div class="contact-us1">Contact us</div>
                                    <div class="menu4">Menu</div>
                                </div>
                            </div>
                            <div class="frame-parent41">
                                <div class="frame-wrapper29">
                                    <div class="image-removebg-preview-7-2-group">
                                        <img class="image-removebg-preview-7-21" loading="lazy" alt="" src="./images/imageremovebgpreview-7-2@2x.png" />
                                        <div class="wrapper1">
                                            <div class="div3">17656789</div>
                                        </div>
                                        <div class="home-container">
                                            <div class="home3" id="homeText">Home</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="frame-parent42">
                                    <div class="frame-wrapper30">
                                        <div class="frame-parent43">
                                            <div class="image-removebg-preview-8-2-group">
                                                <img class="image-removebg-preview-8-21" loading="lazy" alt="" src="./images/imageremovebgpreview-8-2@2x.png" />
                                                <div class="zheygogmailcom-container">
                                                    <div class="zheygogmailcom1">zheygo@gmail.com</div>
                                                </div>
                                            </div>
                                            <div class="frame-wrapper31">
                                                <div class="image-removebg-preview-5-1-group">
                                                    <img class="image-removebg-preview-5-11" loading="lazy" alt="" src="./images/imageremovebgpreview-5-1@2x.png" />
                                                    <div class="kabesa-thimphu1">Kabesa, Thimphu</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="frame-parent44">
                                        <div class="frame-wrapper32">
                                            <div class="menu-group">
                                                <div class="menu5" id="menuText2">Menu</div>
                                                <div class="about-us3" id="aboutUsText1">About us</div>
                                            </div>
                                        </div>
                                      
                                        <div class="cart2" id="cartText">Cart</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="frame-parent45">
                       
                        <div class="zheygo-2024-all-rights-reserv-container">
                            <div class="zheygo-2024-all1">
                                © Zheygo 2024. All Rights Reserved.</div>
                        </div>
                    </div>
                </div>
                <div class="frame-parent46">
                    <div class="wrapper2">
                        <h2 class="h22">“</h2>
                    </div>
                    <div class="frame-parent47">
                        <div class="new-logo-2-container">
                            <img class="new-logo-22" loading="lazy" alt="" src="./images/new-logo-2-1@2x.png" />
                        </div>
                        <div class="frame-parent48">
                            <div class="wrapper3">
                                <h2 class="h23">”</h2>
                            </div>
                            <div class="delight-your-taste1">Delight your taste with diverse taste</div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

   

 
    <script src="./js/profile.js"></script>
    <script>
      // Event listener to navigate to the profile page
  

      // Event listener to navigate to the about us page
      document.getElementById("homeText").addEventListener("click", function() {
          window.location.href = "/aboutus";
      });
           // Event listener to navigate to the about us page
           document.getElementById("homeText").addEventListener("click", function() {
          window.location.href = "/home";
      });

      // Event listener to navigate to the menu page
      document.getElementById("menuText1").addEventListener("click", function() {
          window.location.href = "/menu";
      });

      // Event listener to navigate to the about us page
      document.getElementById("aboutUsText").addEventListener("click", function() {
          window.location.href = "/aboutus";
      });

      // Placeholder event listener for feedback functionality
     

    //   // Placeholder event listener for coupon page functionality
    //   document.getElementById("groupContainer").addEventListener("click", function() {
    //       // Implement coupon page functionality
    //   });

      // Smooth scroll to the rectangle section
      document.getElementById("homeText").addEventListener("click", function() {
          var anchor = document.querySelector("[data-scroll-to='rectangle']");
          if (anchor) {
              anchor.scrollIntoView({ block: "start", behavior: "smooth" });
          }
      });

      // Event listener to navigate to the menu page
      document.getElementById("menuText2").addEventListener("click", function() {
          window.location.href = "/menu";
      });

      // Event listener to navigate to the cart page
      document.getElementById("aboutUsText1").addEventListener("click", function() {
          window.location.href = "/aboutus";
      });

      // Placeholder event listener for feedback functionality
     
      // Event listener to navigate to the cart page
      document.getElementById("cartText").addEventListener("click", function() {
          window.location.href = "/cart";
      });
      document.getElementById("homeText1").addEventListener("click", function() {
          window.location.href = "/home";
      });
      document.getElementById("group").addEventListener("click", function() {
          window.location.href = "/cart";
      });
      
      // Handle profile picture upload
      document.getElementById("upload-photo-button").addEventListener("click", function() {
          document.getElementById("profile-picture").click();
      });

        

      // Handle reset button
      document.getElementById("reset-button").addEventListener("click", function() {
          document.getElementById("profile-form").reset();
          document.getElementById("profile-picture-preview").style.backgroundImage = `url('./images/default-profile.png')`;
      });
  </script>
      <script>
      document.getElementById("upload-photo-button").addEventListener("click", function() {
    document.getElementById("profile-picture").click();
});

document.getElementById("profile-picture").addEventListener("change", function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById("profile-picture-preview").style.backgroundImage = `url(${e.target.result})`;
        };
        reader.readAsDataURL(file);
    }
});

document.getElementById("profile-form").addEventListener("submit", function(event) {
    event.preventDefault();
    const formData = new FormData(event.target);

    // Get the token from localStorage or wherever you have it stored
    const token = localStorage.getItem('token');

    fetch('http://localhost:3000/profile/update', {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${token}`,
        },
        body: formData
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        showError()
        return response.json();
        
    })
    .then(data => {
        console.log('Success:', data);
        // Display the success popup
        showAlert()
    })
    .catch(error => {
        console.error('Error:', error);
        showError()
    });
});

document.getElementById("reset-button").addEventListener("click", function() {
    document.getElementById("profile-form").reset();
    document.getElementById("profile-picture-preview").style.backgroundImage = `url('./images/default-profile.png')`;
});
function showAlert() {
            Swal.fire({
                title: 'Profile Updated!',
                text: '',
                icon: 'success',
                confirmButtonText: 'OK',
                customClass: {
                    container: 'custom-swal-container',
                    title: 'custom-swal-title',
                    content: 'custom-swal-content',
                    confirmButton: 'custom-swal-confirm-button',
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/home';
                }
            });
        }
        function showError() {
            Swal.fire({
                title: 'Error!',
                text: 'Try Again',
                icon: 'error',
                confirmButtonText: 'OK',
                customClass: {
                    container: 'custom-swal-container',
                    title: 'custom-swal-title',
                    content: 'custom-swal-content',
                    confirmButton: 'custom-swal-confirm-button',
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = '/home';
                }
            });
        }
    </script>
<script>
      document.addEventListener("DOMContentLoaded", function() {
        const inputFields = document.querySelectorAll('.instance-item, .instance-inner, .rectangle-input');

        inputFields.forEach(input => {
            input.addEventListener('input', () => {
                const instructionId = input.getAttribute('id') + '-instruction';
                const instruction = document.getElementById(instructionId);
                if (instruction) {
                    instruction.style.display = 'none';
                }
            });
        });
    });
</script>
<script src="js/dropdown.js"></script>
</body>
</html>
